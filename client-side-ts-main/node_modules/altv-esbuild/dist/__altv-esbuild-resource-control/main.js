import*as e from"alt-server";var s="altv-esbuild";var t={debug:()=>{},error(...r){e.logError("[altv-esbuild][resource-control]",...r)}},n=r=>`___${s}:${r}___`,l="res",o=null;e.once(n("resourceControlInit"),(r,a)=>{t.debug("resource name:",r),t.debug("restart command name:",a),o=r,l=a});var u=()=>{if(!o){t.error("main resource name is unknown, cannot restart");return}let r=!0;try{e.Resource.getByName(o)?.isStarted}catch{r=!1}t.debug("resource valid:",r),r?(t.debug("restarting resource"),e.restartResource(o)):(t.debug("starting resource"),e.startResource(o))};e.on("consoleCommand",r=>{r===l&&u()});e.onClient(n("restartCommand"),()=>{u()});e.emit(n("resourceControlReady"));t.debug("ready");
